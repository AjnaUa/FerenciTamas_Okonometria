<!DOCTYPE html>
<html lang="hu" xml:lang="hu">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 . fejezet Út az ökonometriához | Ökonometria</title>
  <meta name="description" content="Az ökonometria a társadalmi-gazdasági jelenségek kvantitatív, empirikus vizsgálatának, modellezésének tudománya. A jegyzet ezt tárgyalja, kerülve a mély matematikai részleteket, a hangsúlyt inkább a módszerek sokféleségének bemutatására helyezve. A számításokat mindenhol R statisztikai környezet alatt szemlélti." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="1 . fejezet Út az ökonometriához | Ökonometria" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://tamas-ferenci.github.io/FerenciTamas_Okonometria/" />
  <meta property="og:image" content="https://tamas-ferenci.github.io/FerenciTamas_Okonometria/FerenciTamas_Okonometria_cover.png" />
  <meta property="og:description" content="Az ökonometria a társadalmi-gazdasági jelenségek kvantitatív, empirikus vizsgálatának, modellezésének tudománya. A jegyzet ezt tárgyalja, kerülve a mély matematikai részleteket, a hangsúlyt inkább a módszerek sokféleségének bemutatására helyezve. A számításokat mindenhol R statisztikai környezet alatt szemlélti." />
  <meta name="github-repo" content="tamas-ferenci/FerenciTamas_Okonometria" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 . fejezet Út az ökonometriához | Ökonometria" />
  
  <meta name="twitter:description" content="Az ökonometria a társadalmi-gazdasági jelenségek kvantitatív, empirikus vizsgálatának, modellezésének tudománya. A jegyzet ezt tárgyalja, kerülve a mély matematikai részleteket, a hangsúlyt inkább a módszerek sokféleségének bemutatására helyezve. A számításokat mindenhol R statisztikai környezet alatt szemlélti." />
  <meta name="twitter:image" content="https://tamas-ferenci.github.io/FerenciTamas_Okonometria/FerenciTamas_Okonometria_cover.png" />

<meta name="author" content="Ferenci Tamás," />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-19799395-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-19799395-2');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Ferenci Tamás: Ökonometria</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Előszó</a></li>
<li class="chapter" data-level="1" data-path="út-az-ökonometriához.html"><a href="út-az-ökonometriához.html"><i class="fa fa-check"></i><b>1</b> Út az ökonometriához</a><ul>
<li class="chapter" data-level="1.1" data-path="út-az-ökonometriához.html"><a href="út-az-ökonometriához.html#történetünk-első-szála-néhány-motiváló-példa"><i class="fa fa-check"></i><b>1.1</b> Történetünk első szála: néhány motiváló példa</a><ul>
<li class="chapter" data-level="1.1.1" data-path="út-az-ökonometriához.html"><a href="út-az-ökonometriához.html#hogyan-hat-az-osztálylétszám-a-tanulók-teljesítményére"><i class="fa fa-check"></i><b>1.1.1</b> Hogyan hat az osztálylétszám a tanulók teljesítményére?</a></li>
<li class="chapter" data-level="1.1.2" data-path="út-az-ökonometriához.html"><a href="út-az-ökonometriához.html#csökkenti-e-a-korrupció-mértékét-a-nők-részvétele-a-politikában"><i class="fa fa-check"></i><b>1.1.2</b> Csökkenti-e a korrupció mértékét a nők részvétele a politikában?</a></li>
<li class="chapter" data-level="1.1.3" data-path="út-az-ökonometriához.html"><a href="út-az-ökonometriához.html#csalnak-e-az-orosz-választásokon"><i class="fa fa-check"></i><b>1.1.3</b> Csalnak-e az orosz választásokon?</a></li>
<li class="chapter" data-level="1.1.4" data-path="út-az-ökonometriához.html"><a href="út-az-ökonometriához.html#további-példák"><i class="fa fa-check"></i><b>1.1.4</b> További példák</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="út-az-ökonometriához.html"><a href="út-az-ökonometriához.html#a-példák-tanulságai-az-empirikus-adatok-elemzésének-legnagyobb-problémája"><i class="fa fa-check"></i><b>1.2</b> A példák tanulságai: az empirikus adatok elemzésének legnagyobb problémája</a></li>
<li class="chapter" data-level="1.3" data-path="út-az-ökonometriához.html"><a href="út-az-ökonometriához.html#a-confounding-megoldásai-kísérlet-és-megfigyelés"><i class="fa fa-check"></i><b>1.3</b> A confounding megoldásai: kísérlet és megfigyelés</a></li>
<li class="chapter" data-level="1.4" data-path="út-az-ökonometriához.html"><a href="út-az-ökonometriához.html#történetünk-második-szála-az-ökonometriai-modellek-és-a-regresszió"><i class="fa fa-check"></i><b>1.4</b> Történetünk második szála: az ökonometriai modellek és a regresszió</a></li>
<li class="chapter" data-level="1.5" data-path="út-az-ökonometriához.html"><a href="út-az-ökonometriához.html#regresszió-a-sokaságban"><i class="fa fa-check"></i><b>1.5</b> Regresszió a sokaságban</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="http://www.medstat.hu/" target="blank">http://www.medstat.hu/</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Ökonometria</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="út-az-ökonometriához" class="section level1">
<h1><span class="header-section-number">1 . fejezet</span> Út az ökonometriához</h1>
<p><span class="math display">\[
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\rank}{rank}
\]</span></p>
<p>Egy ilyen tudomány esetén az első feladat annak tisztázása, hogy egyáltalán mi az az ökonometria, mire szolgál, és mi szükség van rá a társadalmi-gazdasági jelenségek elemzése során. A kérdést két történetszálon fogjuk végigvezetni (persze mint minden valamirevaló kortás norvég regényben, a szálak végül össze fognak érni).</p>
<div id="történetünk-első-szála-néhány-motiváló-példa" class="section level2">
<h2><span class="header-section-number">1.1</span> Történetünk első szála: néhány motiváló példa</h2>
<p>Elsőként, ahelyett, hogy rögtön a definíciókra térnénk, talán érdemesebb pár példát átbeszélni, melyek már mutatni fogják az ökonometriai vizsgálatok fő problémáit.</p>
<div id="hogyan-hat-az-osztálylétszám-a-tanulók-teljesítményére" class="section level3">
<h3><span class="header-section-number">1.1.1</span> Hogyan hat az osztálylétszám a tanulók teljesítményére?</h3>
<div class="handout">
<p>
Kalifornia, 1999: 420 iskolai körzet adatait gyűjtik be
</p>
<p>
A jobb tanár:diák arányú (kisebb létszámú) osztályokban jobb a teljesítmény
</p>
</div>
<p>A közoktatásokkal kapcsolatos vizsgálatok egyik klasszikus kérdése, hogy az osztálylétszám hogyan hat a tanulók teljesítményére. Sokan amellett érvelnek, hogy a kisebb létszámú osztályokban több tanári figyelem jut egy diákra, így a tanulók teljesítménye jobb lesz. De vajon tényleg így van?</p>
<p>E kérdésre számos módon válaszolhatunk: felállíthatunk elméleti modelleket, papíron és ceruzával, készíthetünk interjúkat szakértőkkel, vizsgálhatunk analóg helyzeteket más területekről stb.</p>
<p>Mi azonban a továbbiakban egy módszerrel fogunk foglalkozni: ha empirikusan igyekszünk válaszolni a kérdésre. Empirikusan, annyi mint a tapasztalatok alapján, tehát való életbeli tényadatok begyűjtévél. Elvégre az osztálylétszámokra csak van valamilyen adatgyűjtés, ha az országban futnak standardizált képességmérő felmérő-programok, akkor a tanulók teljesítményére is van adatunk – mi lenne, ha</p>
<p>1999-ben Kalifornia állam pontosan ezzel a kérdéssel szembesült. 420 iskolai körzetből gyűjtött adatokat, melyek – számos egyéb mellett – tartalmazták a tanulók és tanárok létszámát, valamint az elért teszteredményeket<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. Az <code>AER</code> csomag <code>CASchools</code> néven tartalmazza a tényleges adatokat. Lássuk is akkor az eredményt! Íme a tanár:diák arányok és a teszteredmények szóródási diagramok szemléltetve:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">data</span>(<span class="st">&quot;CASchools&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;AER&quot;</span>)</a>
<a class="sourceLine" id="cb1-2" title="2">CASchools<span class="op">$</span>tsratio &lt;-<span class="st"> </span><span class="kw">with</span>(CASchools, teachers<span class="op">/</span>students)</a>
<a class="sourceLine" id="cb1-3" title="3">CASchools<span class="op">$</span>score &lt;-<span class="st"> </span><span class="kw">with</span>(CASchools, (math <span class="op">+</span><span class="st"> </span>read)<span class="op">/</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1-4" title="4">lattice<span class="op">::</span><span class="kw">xyplot</span>( score <span class="op">~</span><span class="st"> </span>tsratio, <span class="dt">data =</span> CASchools,</a>
<a class="sourceLine" id="cb1-5" title="5">                 <span class="dt">xlab =</span> <span class="st">&quot;Tanár:diák arány&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Teszteredmény&quot;</span> )</a></code></pre></div>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Az eredmények első ránézésre megerősítik a sejtésünket: ha több tanár jut egy diákra (kisebbek az osztályok), akkor az jobb teszteredménnyel jár együtt. Nem túl erős az összefüggés, de azért egyértelműen létezik (vájtfülőek kedvéért: <span class="math inline">\(r=0.23\)</span>, <span class="math inline">\(p &lt;0.001\)</span>) és némi munkával még az is kihozható, hogy ezen eredmények szerint ha egy századdal megnöveljük a tanár:diák arányt, akkor várhatóan 8.38 ponttal fog javulni a tesztpontszám.</p>
<p>Ezek az eredmények húsbavágóak. Ha lecsökkentjük az osztálylétszámokat, akkor több tanárt kell alkalmazni, több osztályt kell indítani, adott esetben több osztályteremre lesz szükség, de még az sem kizárt, hogy új iskolaépületre. Pontosan tudni kell tehát, hogy tényleg elérünk-e ezzel valamit. Sőt, valójában ennél többről van szó, azt is tudni kell, hogy <em>mennyit</em> érünk el ezzel, egész egyszerűen azért, hogy költség-haszon mérleget lehessen csinálni: a tanárok bérét meg az iskolafelújítások árát megmondják a kontrollerek, de mit rakunk a mérleg másik serpenyőjébe? Ehhez kell tudni a fenti számot, hogy a kettőből együtt meg tudjuk mondani: hány millió dollárt kell költenünk 1 pont teljesítményjavításra. Hogy aztán ez megéri-e, az természetesen már nem statisztikai kérdés, függ a rendelkezésre álló büdzsétől, az egyéb feladatoktól, de még a kormány értékválasztásától is, ám a statisztikának kell ezt, mint inputadatot szolgáltatni a döntéshez.</p>
<p>De vajon biztos jól van így minden? Ha az ember elkezdi jobban nézni a problémát, esetleg <q>szociológiai</q> szemmel is igyekszik ránézni, akkor hamar szöget üthet a fejében valami. És nem is kell Kaliforniáig menni, magyar, vagy akár még konkrétabban budapesti viszonylatban is ugyanúgy érzékelhető a probléma: ha veszünk kis átlaglétszámú osztályokat (sztereotipikusan mondjuk 2. kerület) és nagy átlaglétszámú osztályokat (sztereotipikusan mondjuk 8. kerület), akkor hihető, hogy az előbbiek teljesítménye jobb, na de álljunk meg egy pillanatra! Csak és kizárólag az osztálylétszám nagyságában térnek el ezek az osztályok egymástól?! Dehogy! Akkor meg honnan tudjuk, hogy a tapasztalt különbség tényleg az osztálylétszámbeli eltérés miatt van…?</p>
<p>A rövid válasz – sajnos – az, hogy sehonnan! És itt van a bökkenő: igaz, hogy a 2. kerületi osztályok kisebbek mint a 8. kerületiek, de <em>egyúttal</em> másban is eltérnek, az oda járó gyerekek szocioökonómiai háttere tendenciájában jobb, tanulásra motiválóbb otthoni környezetből érkeztek, a szülők anyagilag is megengedhetik maguknak, hogy a gyermekeiket különórára járassák stb. E ponton viszont nagy baj van: innen kezdve fogalmunk sem lehet, hogy a tapasztalt különbség <em>tényleg</em> a kisebb osztálylétszám miatt van, vagy esetleg az osztálylétszámnak a világon semmi hatása nincs, csak egyszerűen a kisebb osztályokba jobb szocioökonómiai helyzetű diákok járnak és <em>ez</em> a valódi oka az ott tapasztalt jobb tesztpontszámnak?</p>
<p>Sőt! Innentől kezdve még akár az is elképzelhető, hogy a kisebb osztálylétszám igazából kifejezetten <em>ront</em> a teljesítményen <em>önmagában</em>, csak épp a kisebb osztályokba annyival jobb szociális helyzetű diákok járnak, hogy az átfordítja a helyzetet.</p>
<p>Valaki nem hiszi el, hogy ez még is lehetséges? Nos, gyártsunk egy egyszerű szimulációt! Egyelőre nem árulom el, hogy hogyan készítettem, de íme a végeredménye:</p>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-7-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Első ránézésre nagyjából megfelel a korábbi képnek. De nézzük csak meg jobban mi történik itt! (Mivel ezt saját kezűleg generáltuk, így megtehetjük, hiszen tudjuk mi van a valóságban, az adatok hátterében). Az egyszerűség kedvéért mondjuk, hogy a szocioökonómiai státusz egy bináris változó, <q>jó</q> és <q>rossz</q> a két lehetséges értéke.</p>
<p>Nézzük a tanár:diák arány és a pontszám összefüggését a jó szocioökonómiai státuszú osztályok körében:</p>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Érdekes! Itt fordított a kapcsolat. Na de mi a helyzet a rossz szocioökonómiai státuszú osztályokban? Íme:</p>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Itt is negatív a kapcsolat!</p>
<p>Ez meg hogy a viharban lehet? – kérdezhetné valaki. A rossz szociális helyzetű csoporton belül is ront a kisebb osztálylétszám, a jó helyzetűeken belül is ront, de összességében meg javít?! Egyből világosabb a helyzet, ha egy ábrán ábrázoljuk a kettőt, csak eltérő színekkel:</p>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-10-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Azonnal érthető, hogy mi történik, ha hozzávesszük a korábban mondottakat: a jobb tanár:diák arány igazából <em>ront</em> a helyzeten, de a jobb szociális helyzetű diákok által alkotott osztályok egyszerre kisebbek <em>és</em> – szociális helyzetük, nem az osztálylétszám miatt! – jobb teljesítményűek, és ez olyan erős effektus, hogy ha egyben vizsgáljuk az osztályokat, akkor a kisebb létszám rontó hatását átbillenti, hogy a kisebb osztályok a jobb szociális helyzetük miatt jobb teljesítményűek. Így összeségében azt fogjuk látni, ahonnan indultunk: hogy a kisebb létszámú osztályok jobb teljesítményűek.</p>
<p>A végeredmény tehát: a kisebb osztálylétszám rontja a teljesítményt <em>és</em> a kisebb létszámú osztályok jobb teljesítményűek. És ha valaki érti a fentieket, akkor azt is érti, hogy ebben a mondatban miért nincs semmi ellentmondás!</p>
</div>
<div id="csökkenti-e-a-korrupció-mértékét-a-nők-részvétele-a-politikában" class="section level3">
<h3><span class="header-section-number">1.1.2</span> Csökkenti-e a korrupció mértékét a nők részvétele a politikában?</h3>
<p>TODO</p>
</div>
<div id="csalnak-e-az-orosz-választásokon" class="section level3">
<h3><span class="header-section-number">1.1.3</span> Csalnak-e az orosz választásokon?</h3>
<p>TODO</p>
</div>
<div id="további-példák" class="section level3">
<h3><span class="header-section-number">1.1.4</span> További példák</h3>
<p>Hosszasan sorolhatóak a további, hasonló példák a társadalmi-gazdasági elemzések világából. Kommentár nélkül még néhány kérdés, érdemes mindegyiket a fenti példákból leszűrődni kezdődő tanulságok szemüvegén keresztül végiggondolni:</p>
<ul>
<li>Hogyan hat a munkanélküliség a GDP-re?</li>
<li>Hogyan hat az államadósság a növekedésre?</li>
<li>Return on education: mekkora az oktatás haszna, tehát, ha egy évvel többet tölt valaki az iskolapadban, az mennyivel növeli a fizetését?</li>
<li>Létezik-e <q>cigánybűnözés</q>?</li>
<li>Az ökonometria-előadás haszna: ha többet tölt a hallgató az öko előadáson, jobb jegyet kap-e emiatt, és ha igen, mennyivel?</li>
<li>Milyen tényezők hatnak arra, hogy egy országban hány terrortámadás történik?</li>
<li>Hogyan hat a rendőri erők létszáma egy adott városban az ottani bűnözési rátákra?</li>
<li>Cégeknek adott továbbképzési támogatás hogyan hat a termelékenységre?</li>
</ul>
<p>(Igen, ezekre mind válaszolhatunk ökonometriai módszerekkel!)</p>
</div>
</div>
<div id="a-példák-tanulságai-az-empirikus-adatok-elemzésének-legnagyobb-problémája" class="section level2">
<h2><span class="header-section-number">1.2</span> A példák tanulságai: az empirikus adatok elemzésének legnagyobb problémája</h2>
<div class="handout">
<p>
Valamilyen ok-okozati hatásra vagyunk kíváncsiak; a <strong>kauzalitás</strong> érdekel minket
</p>
<p>
Számos vizsgálati módszer közül most az <strong>empirikus</strong> adatok elemzésével fogunk foglalkozni: tényadatokat gyűjtünk be, és ebből igyekszünk következtetni
</p>
</div>
<p>A mintázat most már látszik. Valamilyen tényező hatására vagyunk kíváncsiak, az okozati hatására, szép szóval: a <strong>kauzalitásra</strong>, ez mindegyik példa lelke.</p>
<p>Úgy döntünk, hogy a kérdést <strong>empirikus</strong> adatok elemzésével igyekszünk megoldani, azaz való életbeli tényadatokat gyűjtünk be. (A vizsgált tényezőről, a hatásról, esetleg egyéb fontos változókról.)</p>
<p>Azért, hogy eldöntsük, hogy van-e okozati hatás (illetve, hogy lemérjük mekkora), csoportokat hasonlítunk össze, melyek eltérnek a vizsgált tényezőben. Csak épp közben a vizsgált tényezőbeli eltéréssel <em>automatikusan</em> <em>együtt járnak</em> egyéb tényezőbeli eltérések, és innentől kezdve bajban vagyunk, mert ha találunk is különbséget a csoportok között, nem fogjuk tudni, hogy az mi miatt van: a vizsgált tényezőbeli eltérés miatt, a vele együtt járó egyéb eltérések miatt, vagy esetleg ezek valamilyen keveréke miatt. Ezt a jelenséget, mely az empirikus adatok elemzésének legnagyobb problémája, hívják <strong>confoundingnak</strong>. (Angolul nagyon jó szó, amire nem sikerült hasonlóan találó magyar fordítást bevezetni. A confounding azt jelenti, hogy összemosódás, és csakugyan, az a probléma, hogy a vizsgált tényezőbeli eltérés összemosódik egyéb tényezőkbeli eltérésekkel.)</p>
<p>Vegyük észre, hogy a confounding fellépéséhez az kellett, hogy létezzen olyan tényező, amire két dolog <em>egyszerre</em> igaz: együttmozog a vizsgált tényezővel (összefügg vele) <em>és</em> önmagában – azaz a vizsgált tényező minden értéke mellett – hat az eredményváltozóra. Akkor van confounding, ha ez a kettő egyidejűleg fennáll. Ha bármelyik nincs jelen, akkor nincs probléma. Ha a szociális helyzet összefügg ugyan az osztálylétszámmal, de nem hat a teljesítményre, akkor nincs baj: igaz, hogy a kisebb osztályok jobb szociális helyzetűek, de ez nem befolyásolja a teljesítményt. Hasonlóképp, ha a szociális helyzet befolyásolja ugyan a teljesítményt, de nem függ ösze az osztálymérettel, akkor sincs gond: a kisebb osztályoknak nem tér el a szociális helyzete a nagyobbaktól. (Gondoljuk végig az összes többi példára is!) Azokat a változókat, amelyek ezt a két dolgot egyidejűleg tudják, tehát a vizsgált tényezővel együttmozognak <em>és</em> az eredményváltozóra is hatnak, ilyen módon okozzák a confoundingot, szokás zavaró változónak, vagy <strong>confoundernek</strong> nevezni.</p>
<p>A későbbiek szempontjából hasznos lesz ezt még másképp átfogalmazni. A probléma, hogy nem az érdekel minket, hogy egy osztály abban tér el, hogy kisebb a létszám, akkor ott jobb-e a teljesítmény, hanem az, hogy ha <em>csak</em> abban tér el, hogy kisebb a létszám, akkor ott jobb-e a teljesítmény. Ezt szokás <strong>ceteris paribus elvnek</strong> (<q>minden mást változatlanul tartva</q>) nevezni, ez a kulcs a kauzalitáshoz: az érdekel minket, hogy ha minden mást változatlanul tartva <em>csak</em> az osztálylétszám változik, akkor mi történik. A naiv elemzésben az osztálylétszám változásával együtt egyéb tényezők is változhatnak, így ebből nem tudunk a kauzalitásra következtetni. Figyeljünk a szóhasználatra: azt mondhatjuk, hogy a kisebb osztálylétszám jobb teljesítménnyel <em>jár együtt</em> (korreláció), de azt nem, hogy a kisebb osztálylétszám jobb teljesítményt <em>okoz</em> (kauzalitás).</p>
<p>Valaki esetleg azt mondhatja, hogy rendben, itt tényleg van valami módszertani gubanc, meg szép latin szavak<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> de igazából ez csak az ilyen módszertani kérdéseken szöszmötölő kutatóknak érdekes, a lényeg, hogy ha kisebb az osztálylétszám, akkor ott jobb a teljesítmény, ennyi a fontos, és pont. Nem! Ez az érvelés teljesen fals, az hogy mi hat mire, nem tudományos szőrszálhasogatás, hanem elsőrendű gyakorlati kérdés. Miért? A beavatkozás miatt! A <em>valódi</em> okozatiság felismerése ott válik kritikussá, ha beavatkozunk a rendszerbe, ha ugyanis rosszul állapítjuk meg az okozati kapcsolatok irányát, akkor ez teljesen félremehet. Például lecsökkentjük az osztálylétszámokat, adott esetben rengeteg pénzt elköltve, de ha a <em>valódi</em> oka a jobb teljesítménynek nem az osztálylétszám, hanem a jobb szociális helyzet, akkor ezzel semmit nem érünk el! Sőt, mint a későbbi példa mutatja, adott esetben még kimondottan árthatunk is!</p>
<!-- (Kitérő megjegyzés: ha kizárólag az érdekel minket, hogy előrejelezzük a teljesítményt, akkor azt gondolhatjuk, hogy ekkor, de csak ekkor tényleg jók a helytelen kauzalitású modellek is. Valójában) -->
<p>Végezetül még egy megjegyzés. A confounding felismerése nem azt jelenti, hogy akkor igazából nincs hatás, végképp nem azt, hogy bizonyítottuk, hogy ellentétes irányú hatás van. Pusztán annyit jelent, hogy a confounding-gal terhelt adatok <em>nagyon gyenge</em> bizonyítékot jelentenek a hatás léte mellett. De ettől még lehet éppenséggel hatás! – csak az ilyen adatok nagyon kevéssé támasztják ezt alá.</p>
</div>
<div id="a-confounding-megoldásai-kísérlet-és-megfigyelés" class="section level2">
<h2><span class="header-section-number">1.3</span> A confounding megoldásai: kísérlet és megfigyelés</h2>
<p>Most, hogy alaposan kiveséztük a confounding problémáját, természetesen adódik a kérdés: na de mit tehetünk ez ellen? Azt könnyű lenne biztosítani, hogy a csoportok egy-két általunk megadott szempont szerint ne legyenek eltérőek, de azt, hogy <em>egyáltalán semmilyen</em> szempont szerint ne térjenek el (kivéve persze az vizsgált tényezőt), olyanok szerint sem, amikről eszünkbe sem jut, hogy lehet bennük eltérés, csak egy módon lehet: ez a <strong>randomizálás</strong>. Ahogy a szó is sugallja, a randomizálás lényege, hogy a megfigyelési egységeket <em>véletlenszerűen</em> sorsoljuk különböző csoportokba, majd ezeket a csoportokat tesszük ki a vizsgált tényezőnek. Például pénzfeldobással döntjük el az óvoda végén minden egyes gyermekről, hogy kis vagy nagy létszámú osztályba kerüljön. Ez azért jó, mert ilyen módon a két csoport között nem lesz szisztematikus különbség szocioökonómiai státuszban, de ami még fontosabb: <em>semmilyen</em> tényezőben nem lesz szisztematikus különbség, a kék szeműek vagy a balkezesek számában sem, hiszen a pénzfeldobás nyilván ezekre is érzéketlen. Ilyen módon a csoportok összehasonlíthatóak: ha találunk köztük különbséget a tanulmányi eredményben, az <em>tényleg</em> az osztálylétszámnak lesz betudható… hiszen másban nincs szisztematikus különbség.</p>
<p>A randomizálásnak egy baja van: akkor alkalmazható, ha a vizsgált tényezőt tudjuk irányítani. (Hiszen nekünk kell az egyik csoportba sorsolt gyerekeket kis, a másikat nagy létszámú osztályba helyezni.) Azokat a kutatásokat, ahol a kutatást végzők tudják irányítani a vizsgált tényezőt, <strong>kísérletes (experimentális) kutatásnak</strong> nevezzük. És itt értünk el a bökkenőhöz: a társadalmi-gazdasági jelenségek vizsgálata az a terület, ahol tipikusan <em>nem</em> lehet kísérletet végezni. Aligha lehet gyerekeket pénzfeldobással sorsolni osztályokba, vagy országokban pénzfeldobással meghatározni, hogy mennyi nő üljön a kormányban…</p>
<p>(Persze ez sincs kőbe vésve. Néha lehet kísérletet csinálni, ahogy a választási megfigyelők példája is mutatja. Másik oldalról, például az orvostudományban sokszor lehet kísérletet csinálni, ez a jellemző új gyógyszerek bevezetésénél, ahol a vizsgálat során véletlenszerűen kiválasztott alanyok kapnak gyógyszert, míg a többiek placebot, de ott is van olyan kérdés, ahol nem lehet kísérletet csinálni! Tipikusan ilyenek fordulnak elő az epidemiológiában: a vörös hús rákkeltő? Aligha lehet emberekkel pénzfeldobás alapján évtizedekig több vagy kevesebb vörös húst etetni… Innentől a probléma ott is ugyanaz: ha a vörös húst evők között több a rákos, az nagyon gyenge bizonyíték, mert a több vörös húst fogyasztó emberek milliónyi <em>egyéb</em> dologban is eltérnek a kevesebb vörös húst fogyasztó emberektől a vörös hús fogyasztás mértékén túl – és mi van, ha ezek közül valami növeli a rákkockázatot…?)</p>
<p>Azokat a vizsgálatokat, ahol a kutatást végzők nem tudják befolyásolni a vizsgált tényezőt, az alakul a maga rendje szerint, és a kutatók csak passzíve feljegyzik a történéseket külső szemlélőként, <strong>megfigyeléses (obszervációs) vizsgálatnak</strong> nevezzük. A társadalmi-gazdasági elemzések során tehát szinte mindig ilyenekkel lesz dolgunk. Márpedig ezeknél mindig fejünk felett fog lebegni a confounding problémája.</p>
</div>
<div id="történetünk-második-szála-az-ökonometriai-modellek-és-a-regresszió" class="section level2">
<h2><span class="header-section-number">1.4</span> Történetünk második szála: az ökonometriai modellek és a regresszió</h2>
<p>Folytassuk most valami – látszólag – teljesen más témával.</p>
<p>Minden fenti példában volt egy változó, mely az eredménye volt a vizsgálatunknak, a kimenet szerepét játszotta, tehát aminek az alakulását le kívántuk írni (tesztpontszám, korrupció mértéke, szavazati arány stb.). A továbbiakban ezt <strong>eredményváltozónak</strong> (vagy függő változónak, angolul response) fogjuk hívni, jele <span class="math inline">\(Y\)</span>. Az első példánkban <span class="math inline">\(Y=\text{Teszteredmény}\)</span>. Másrészről voltak változók, adott esetben nem is egy, amikkel le akarjuk írni az eredményváltozó alakulását, amelyekről azt mondjuk, hogy hatnak, vagy hathatnak az eredményváltozóra; ezek neve <strong>magyarázó változó</strong> (vagy független változó, angolul predictor). Ezekből több is lehet (az első példában ilyen az osztálylétszám és a szocioökonómiai helyzet), jelöljük számukat <span class="math inline">\(k\)</span>-val, és az egyes változókat <span class="math inline">\(X_i\)</span>-vel (<span class="math inline">\(i=1,2,\ldots,k\)</span>). Az első példában <span class="math inline">\(k=2\)</span> és <span class="math inline">\(X_1=\text{Tanár:diák arány}\)</span>, <span class="math inline">\(X_2=\text{Szocioökonómiai státusz}\)</span>. Összefoglalva, az eredményváltozó a vizsgált kimenet, a magyarázó változók az azt – potenciálisan – befolyásoló tényezők (tehát a fontos, vizsgált változók és a – potenciális – confounderek egyaránt).</p>
<!-- Kitérő: szimultaneitás -->
<p>Az <span class="math inline">\(X\)</span>-ek hatnak az <span class="math inline">\(Y\)</span>-ra, vagy fordítva megfogalmazva, az <span class="math inline">\(Y\)</span> függ az <span class="math inline">\(X\)</span>-ektől – ragadjuk meg most ezt matematikailag. Szerencsére arra, hogy egy változó függ más változóktól, ismerünk egy jó matematikai objektumot, ez a függvény fogalma:
<span class="math display">\[
Y=f\left(X_1,X_2,\ldots,X_k\right)
\]</span>
A későbbiekben erre azt fogjuk mondani, hogy ez egy statisztikai modell. Ennek az általánosságával nehéz lenne vitatkozni, de egy baja mégis csak van.</p>
<p>A fő probléma, hogy a modell azt feltételezi, hogy az <span class="math inline">\(Y\)</span> és az <span class="math inline">\(X\)</span>-ek kapcsolata <strong>determinisztikus</strong>. Szinte teljesen mindegy is, hogy mi az <span class="math inline">\(Y\)</span> és mik az <span class="math inline">\(X\)</span>-ek, hogy mi a vizsgált probléma, a társadalmi-gazdasági jelenségek vizsgálata kapcsán lényegében általánosan kijelenthető, hogy ez irreális: bármilyen ügyesek vagyunk, soha az életben nem fogunk tudni determinisztikus modelleket alkotni társadalmi-gazdasági jelenségekre. (Aligha lehet olyan modellt alkotni, ami <em>pontosan</em>, hiba nélkül megmondja előre, hogy egy osztály milyen pontszámot fog elérni, vagy, hogy egy választáson pontosan hány szavazat érkezik egy pártra.) Ez legfeljebb középiskolás fizikában működik, a társadalmi-gazdasági jelenségekben szinte kizárt, hogy <em>függvényszerű</em> módon meghatározzák a magyarázó változók az eredményváltozót. Hiszen lesznek változók amiket nem ismerünk, rosszul mérünk, rosszul veszünk figyelembe, az, hogy egy gyerek hány pontot ír egy teszten, mindig függ a mi közelítési szintünk ténylegesen véletlen dolgoktól stb. A A valódi modell tehát <strong>sztochasztikus</strong> kell legyen:
<span class="math display">\[
  Y=f\left(X_1,X_2,\ldots,X_k\right)+\varepsilon
\]</span>
Itt <span class="math inline">\(\varepsilon\)</span> jelzi a fentiekből fakadó bizonytalanságot, a neve: <strong>hibatag</strong>.</p>
<p>Rövid jelölésként az <span class="math inline">\(X\)</span>-eket gyakran egy vektorba vonjuk össze: <span class="math inline">\(Y=f\left(\underline{X}\right)+\varepsilon\)</span>.</p>
<p>Az így kapott modellünk már egy teljes értékű statisztikai (ökonometriai) modell! Az ilyen <span class="math inline">\(f\)</span>-et hívjuk (sokasági) <strong>regressziófüggvénynek</strong>.</p>
<p>Később még többet fogunk vele foglalkozni, de már most is fontos, hogy lássuk, hogy az <span class="math inline">\(f\)</span>-nek van egy nagyon is földhözragadt értelmezése: szeretném megtippelni <span class="math inline">\(Y\)</span> értékét <span class="math inline">\(X\)</span>-ek ismeretében. Hogy ez miért lesz fontos, azt majd később fogjuk látni, de a feladat így is értelmes: ha ismerem egy osztály tanár:diák arányát és a szociális helyzetet, akkor ezek alapján</p>
<p>Ez az egyenlet egy <strong>sokasági modell</strong>: azt írja le, hogy a valóság hogyan működik. Pontosan ugyanaz a helyzet, mint bármilyen következtető statisztikai kurzus alapjainál: van a sokaság, amit eloszlásokkal, valószínűségszámítási eszközökkel írunk le, de a tényleges vizsgálatokban mi sem ismerjük. (Tehát nem tudjuk, hogy ezek az eloszlások milyenek.) Ahhoz, hogy megismerjük veszünk egy mintát, ennek a kezeléséhez már statisztika kell, aminek a feladat épp az lesz, hogy következtessünk a sokaságra.</p>
<p>Most is hasonló a helyzet: mi sem tudhatjuk, hogy milyen <em>eloszlása</em> van a teszteredményeknek, csak van egy 420 elemű mintánk rá nézve; és hasonlóan a többi változóval. Most azonban egy pillanatig leszünk valszámos emberek: ne törődjünk azzal a problémával, hogy a sokaságot igazából nem ismerhetjük, játsszuk azt, hogy ismerjük (tudjuk mik ezek az eloszlások), és vizsgáljuk meg, hogy ebből mire jutunk! Ugyanúgy mint a következtető statisztikánál, ez nagyon hasznos lesz majd később, a számunkra igazán érdekes – statisztikai – feladat megoldásánál is.</p>
<p>A nem-kísérleti jelleg miatt az az értelmes modell, ha mind az eredményváltozót, mind a magyarázó változókat – és így persze <span class="math inline">\(\varepsilon\)</span>-t is – valószínűségi változónak vesszük. (Ezért használtam eddig is nagy betűket!) Bizonyos egyszerűsített tárgyalások úgy tekintik, mintha az <span class="math inline">\(X\)</span>-ek nem valószínűségi változók lennének, hanem rögzített értékek. Ez a kísérletek világában rendben lehet, ahol mi be tudjuk <em>állítani</em> az <span class="math inline">\(X\)</span>-ek értékét, de ökonometriában, a társadalmi-gazdasági elemzések világában még közelítő feltevésként is értelmetlen.</p>
</div>
<div id="regresszió-a-sokaságban" class="section level2">
<h2><span class="header-section-number">1.5</span> Regresszió a sokaságban</h2>
<p>Elsőként tehát le kell írnunk a sokaságot: valszámos emberek leszünk, és úgy vesszük mintha ismernénk a sokaságot. Mit jelent ez, mit is ismerünk pontosan? Nem csak <span class="math inline">\(Y\)</span> és <span class="math inline">\(X_1,X_2,\ldots,X_k\)</span> eloszlásait (külön-külön), hanem az együttes eloszlásukat is! Ekkor tudunk mindent ezekről (valószínűségszámítási értelemben).</p>
<p>Ezt úgy kell elképzelnünk, mint egy <span class="math inline">\(k+1\)</span> dimenziós teret: minden pont egy adott magyarázó- <em>és</em> eredményváltozó-kombináció. E fölött értelmezve van egy eloszlás, ami azt mutatja, hogy ha mintát veszünk ebből az eloszlásból, akkor milyen valószínűséggel esünk az adott pont kis környékére.</p>
<p><span class="math inline">\(k+1\)</span> dimenziós terekben a legtöbb ember relatíve rosszul tájékozódik, úgyhogy ábrázoljunk egy olyan együttes eloszlást, amikor még átlátható a dolog!</p>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-12-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Ez egy kétváltozós eloszlás együttes sűrűségfüggvénye; itt az egyik változó játsza a magyarázó-, a másik az eredményváltozó szerepét. A mintavétel ebből az eloszlásból azt jelenti, hogy kiveszünk egy iskolát (tehát tanár:diák arányt <em>és</em> teszteredményt egyszerre!); ahol magasan fut a sűrűségfüggvény, arról a környékről gyakran veszünk ki, ahol alacsonyan, ott ritkábban. A hiba mibenléte is jól érthető erről az ábráról: ha kiválasztunk egy adott konkrét <span class="math inline">\(X_1\)</span>-et, ahhoz csak egyetlen <span class="math inline">\(f\left(X_1\right)\)</span>-et adhatunk, mégis <span class="math inline">\(Y\)</span> minden értéket felvehet, tehát lehetetlen, hogy ne hibázzunk. (Csak egyetlen egy pont lesz a végtelen sok közül, ahol nem hibázunk.) Persze <span class="math inline">\(f\left(X_1\right)\)</span>-et majd pont úgy lesz célszerű megválasztani, hogy oda rakjuk, ahol <span class="math inline">\(Y\)</span> gyakran előfordul, hogy a gyakran előforduló esetekben hibázzunk picit, és csak a ritkábbakban nagyobbat – de erről majd kicsit később.</p>
<p>Elárulom, hogy ez az eloszlás többváltozós normális (később ennek majd jelentősége lesz), <span class="math inline">\(\boldsymbol{\mu}=\begin{pmatrix} 654 \\ 0.0514 \end{pmatrix}\)</span> várhatóérték-vektorral és <span class="math inline">\(\mathbf{C}=\begin{pmatrix} 19,\!1^2 &amp; 0,\!23 \cdot 19,\!1 \cdot 0,\!00515 \\ 0,\!23 \cdot 19,\!1 \cdot 0,\!00515 &amp; 0,\!00515^2 \end{pmatrix}\)</span> kovariancia-mátrixszal<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>.</p>
<p>Sajnos ez az ábrázolás nehezen érzékelhető (pláne, ha nem interaktívan nézzük, és nincs módunk forgatni), jobban járunk, ha így rajzoljuk ki:</p>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Ez ugyanaz mint a fenti sűrűségfüggvény, de <q>szintvonalakkal</q> leírva (azaz különböző <span class="math inline">\(z\)</span> magasságokban elmetszettük a sűrűségfüggvényt és a kapott metszeteket ábrázoltuk). Belátható, hogy többváltozós normális esetén ezek mindig ellipszisek<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>. Ezt az ábrázolást szokás <q>contour plot</q>-nak nevezni, előnye, hogy – a háromdimenziós érzékeltetéssel szemben – nem érzékeny a nézőpont megválasztására, részek nem takarnak ki másokat stb. (Ám cserében nyilván információ-vesztéssel jár, ami azzal arányos, hogy milyen sűrűn képezzük a metszeteket.)</p>
<p>Térjünk most vissza az alapkérdésünkre! Úgy vesszük, hogy ez az eloszlás adott, és le akarjuk írni mint <span class="math inline">\(Y=f\left(\underline{X}\right)+\varepsilon\)</span>; de vajon mi <span class="math inline">\(f\)</span>-re a legjobb választás? Persze egy ilyen kérdést hallva azonnal vissza kell kérdezni: mi a jóság mérőszáma? Hiszen csak ennek ismeretében mondható meg, hogy mi az optimális sokasági regressziófüggvény.</p>
<p>Mivel az <span class="math inline">\(\varepsilon\)</span> hibát fejez ki, így azzal valószínűleg kevesen vitatkoznának, hogy az a legjobb <span class="math inline">\(f\)</span>, amely mellett a hiba a legkisebb. Igen ám, de mi az, hogy a hiba a <q>legkisebb</q>? Ez nem olyan nyilvánvaló, ennek megértéséhez beszéljünk egy picit a hibáról. A helyzetet a fenti példán úgy kell elképzelnünk, hogy behúzzuk a <span class="math inline">\(f\left(X_1\right)\)</span> függvényt; ez olyan mintha rajzolnánk egy görbét az <span class="math inline">\(X_1-Y\)</span> síkra. Ez után végigmegyünk a sík minden pontján, és megnézzük ott mekkora a hiba: mennyire van távol <span class="math inline">\(Y\)</span> az <span class="math inline">\(f\left(X_1\right)\)</span>-től; ez pedig akkora súllyal fog szerepet játszani a hiba eloszlásában, amilyen magasan fut az adott ponton a sűrűségfüggvény. Mindezek természetesen ugyanígy működnek az általános, <span class="math inline">\(k+1\)</span> dimenziós esetben is.</p>
<p>A hibának tehát egy eloszlása van, így nem egyértelmű, hogy mikor a <q>legkisebb</q>. Két dolgot kell tennünk, az egyik választás egyértelmű, de a másik már inkább döntés kérdése. Az első, hogy a hiba helyett annak <span class="math inline">\(\mathbb{E}\varepsilon\)</span> várható értékét tekintjük. Ez jó, mert így a valószínűségi változóból rögtön egy számot kapunk, amire pedig azonnal jobban értjük, hogy mit jelent az, hogy legyen a legkisebb. De igazán azért jó, mert ha összekombináljuk a várható érték fogalmát az előbbi bekezdés végén mondottakkal, akkor látjuk, hogy ez egy nagyon logikus dolgot mond: azt, hogy ott kevésbé számít a hibázás, ahová egyébként is ritkán esünk, és ott számít jobban a hibázás, ami gyakran előfordul!</p>
<p>Azonban még nem végeztük. Ha meggondoljuk, akkor rögtön látjuk, hogy <span class="math inline">\(\mathbb{E}\varepsilon\)</span> még nem lesz jó: a hiba lehet negatív is és pozitív is, de mi<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> nem mondhatjuk azt, hogy ha egyszer 10-zel fölé lőttünk, egyszer meg 10-zel alá, akkor tökéletesek voltunk. Magyarán: meg kell szabadulni az előjeltől. Itt már van választási lehetőségünk, hogy mit teszünk, most döntsünk úgy (és jelen jegyzet túlnyomó többségében ezt adottságnak fogjuk venni), hogy négyzetre emeléssel szabadulunk meg az előjeltől, hiszen a négyzetre emelés függvény tulajdonságai nagyon kellemesek.</p>
<p>Így tehát a megoldandó feladat:</p>
<p><span class="math display">\[
\argmin_f \mathbb{E}\left[Y-f\left(\underline{X}\right)\right]^2
\]</span></p>
<p>Ez első ránézésre nagyon is ijesztően néz ki: optimalizációs feladat – az <em>összes létező</em> függvény terében?! Mert azt még érti az ember, hogy <span class="math inline">\(x\)</span> felveszi az összes lehetséges valós számot, és mikor lesz <span class="math inline">\(f\left(x\right)\)</span> minimális, na de mi az, hogy valami felveszi az összes létező (<span class="math inline">\(k\)</span>-változós) függvényt…? Hiszen semmi más megkötés nincs a világon, <em>akármilyen</em> <span class="math inline">\(k\)</span>-változós függvény szóba jöhet, semmit nem mondtunk a függvényformáról, összeadhatjuk a változókat, összeszorozhatjuk, hatványozhatjuk, bármilyen műveletet végezhetünk, bármilyen konstanst belerakhatunk, és az összes ilyen közül mondjuk meg, hogy ez a kifejezés mikor lesz a legkisebb?!</p>
<p>Az érdekes az, hogy bármilyen abszurdan is néz ki, a dolognak van megoldása! Ráadásul a végeredmény nem is túl bonyolult: <span class="math inline">\(f\)</span> legjobb megválasztása adott pontban <span class="math inline">\(Y\)</span> feltételes várható értéke lesz az kérdéses pontban:</p>
<p><span class="math display">\[
f_{\text{opt}}\left(\mathbf{x}\right)=\mathbb{E}\left(Y \mid \underline{X}=\mathbf{x}\right)
\]</span></p>
<p>Bizonyítsuk is be ezt! Legyen <span class="math inline">\(f_{\text{opt}}\)</span> a feltételes várható érték, <span class="math inline">\(f\)</span> pedig egy tetszőleges <span class="math inline">\(k\)</span>-változós függvényt. Alakítsuk át a kritériumfüggvényt:
<span class="math display">\[\begin{align*}
\mathbb{E}\left[Y-f\left(\underline{X}\right)\right]^2&amp;=\mathbb{E}\left[Y-f_{\text{opt}}\left(\underline{X}\right)+f_{\text{opt}}\left(\underline{X}\right)-f\left(\underline{X}\right)\right]^2=\\
&amp;=\mathbb{E}\left[Y-f_{\text{opt}}\left(\underline{X}\right)\right]^2+\mathbb{E}\left\{\left[Y-f_{\text{opt}}\left(\underline{X}\right)\right]\left[f_{\text{opt}}\left(\underline{X}\right)-f\left(\underline{X}\right)\right]\right\}+\\
&amp;+\mathbb{E}\left[f_{\text{opt}}\left(\underline{X}\right)-f\left(\underline{X}\right)\right]^2.
\end{align*}\]</span>
A középső tag szerencsére nulla, ezt toronyszabállyal láthatjuk be:
<span class="math display">\[\begin{align*}
&amp;\mathbb{E}\left\{\left[Y-f_{\text{opt}}\left(\underline{X}\right)\right]\left[f_{\text{opt}}\left(\underline{X}\right)-f\left(\underline{X}\right)\right]\right\}=\\
&amp;=\mathbb{E}\left\{\mathbb{E}\left\{\left[Y-f_{\text{opt}}\left(\underline{X}\right)\right]\left[f_{\text{opt}}\left(\underline{X}\right)-f\left(\underline{X}\right)\right] \right\} \mid \underline{X} \right\}=\\
&amp;=\mathbb{E}\left\{\left[f_{\text{opt}}\left(\underline{X}\right)-f_{\text{opt}}\left(\underline{X}\right)\right]\mathbb{E}\left[f_{\text{opt}}\left(\underline{X}\right)-f\left(\underline{X}\right)\right] \mid \underline{X} \right\}=0,
\end{align*}\]</span>
így azt kaptuk, hogy
<span class="math display">\[
\mathbb{E}\left[Y-f\left(\underline{X}\right)\right]^2=\mathbb{E}\left[Y-f_{\text{opt}}\left(\underline{X}\right)\right]^2+\mathbb{E}\left[f_{\text{opt}}\left(\underline{X}\right)-f\left(\underline{X}\right)\right]^2,
\]</span>
amiből már csakugyan látható, hogy <span class="math inline">\(f_{\text{opt}}\)</span> a legjobb választás, hiszen az első tagra nincsen ráhatásunk (mi ugye <span class="math inline">\(f\)</span>-et állítjuk), a második tag pedig egy négyzet várható értéke, így <span class="math inline">\(0\)</span>-nál kisebb nem lehet, de az csakugyan elérhető, ha <span class="math inline">\(f\)</span>-nek <span class="math inline">\(f_{\text{opt}}\)</span>-ot választjuk.</p>
<p>Látható tehát, hogy ez az eredmény <em>teljesen univerzális</em>, semmit nem tételeztünk fel <span class="math inline">\(f\)</span>-ről!</p>
<p>Talán nem felesleges feleleveníteni ezen a pontok a feltételes várható érték fogalmát.</p>
<p>A kiindulópont a feltételes eloszlás, amit úgy kapunk, hogy fogjuk az együttes eloszlást, és egy adott ponton (ami a feltétel) átmetszük. Mondjuk legyen a feltétel az, hogy <span class="math inline">\(X_1=0,\!055\)</span>:</p>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-14-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Az együttes sűrűségfüggvény, ne feledjük, egy hegy (aminek a szintvonalait mutatja az ábra), tehát arról van szó, hogy fogunk egy nagy kést, és a piros vonal mentén végigvágjuk a hegyet. Így ezt kapjuk:</p>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-15-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Vigyázat, ez még nem sűrűségfüggvény, hiszen nem 1 a görbe alatti területe! De már majdnem megvagyunk, nincs más feladatunk, mint átnormálni (elosztani alkalmas konstanssal), hogy 1 legyen a görbe alatti terület, ez az alkalmas konstans persze a jelenlegi görbe alatti területe lesz, ami nem más, mint a vetületi eloszlás értéke a feltétel pontjában. Elvégezve ezt kapjuk a feltételes eloszlást:</p>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-16-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>A feltételes várható érték nem más, mint a feltételes eloszlás várható érték – tehát ennek a fenti függvénynek a várható érték. Bejelölve rajta:</p>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-17-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>A feltételes várható érték tehát nagyjából 657, és ne feledjük, ez ahhoz a feltételhez tartozik, hogy a tanár:diák arány értéke 0,055. Ahogy az előbb megállapítottuk: ha valaki azt kérdezi, hogy ekkora tanár:diák arány mellett mi a legjobb tippünk a teszteredményre, akkor válaszoljunk 657-et! Ezzel is hibázhatunk persze, de így is ekkor járunk a legjobban (elfogadva persze, hogy négyzetes hibázást minimalizálunk).</p>
<p>Jelöljük is be ezt az értéket az eredeti ábránkon:</p>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-18-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Így ni: ha 0,055-ben kérdeznek meg minket, akkor ez a legjobb tippünk.</p>
<p>De az ember itt már vérszemet kap: vajon mi történik, ha kiszámoljuk az összes többi pontban is, hogy mi a legjobb tippünk, tehát a feltételes várhatóértéket?! Íme:</p>
<p><img src="FerenciTamas_Okonometria_files/figure-html/unnamed-chunk-19-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Nem lehet nem észrevenni: ezek mind egy egyenesre<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> illeszkednek! A dolog természetesen nem véletlen, és azért van így, mert az eloszlás többváltozós normális volt. Ez esetben az optimális sokasági regressziófüggvény csakugyan mindig lineáris, ez tételként kimondható<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>: ha <span class="math inline">\(Y\)</span> és <span class="math inline">\(\underline{X}\)</span> együttes eloszlása normális<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>, akkor</p>
<p><span class="math display">\[
\mathbb{E}\left(Y \mid \underline{X}\right)=\mathbb{E}Y+\mathbf{C}_{Y\underline{X}}\mathbf{C}_{\underline{X}\underline{X}}^{-1}\left(\underline{X}-\mathbb{E}\underline{X}\right).
\]</span></p>
<p>Egy pillanatra álljunk meg. Eddig feltételes eloszlást csak úgy írtunk, hogy a feltétel az egy konkrét érték (szám vagy vektor) volt: <span class="math inline">\(\mathbb{E}\left(Y \mid \underline{X}=\mathbf{x}\right)\)</span>. De itt valami más szerepel! A magyarázathoz elevenítsünk fel egy valszám definíciót: a <span class="math inline">\(\mathbb{E}\left(Y \mid \underline{X}=\mathbf{x}\right)\)</span> egy <span class="math inline">\(h\)</span> transzformációt definiál (hiszen adott <span class="math inline">\(\mathbf{x}\)</span>-hez hozzárendel egy valós számot), és <span class="math inline">\(\mathbb{E}\left(Y \mid \underline{X}\right)\)</span> alatt <span class="math inline">\(h\left(\underline{X}\right)\)</span>-et értjük. Tehát van értelme az <span class="math inline">\(\mathbb{E}\left(Y \mid \underline{X}\right)\)</span> objektumnak is, és ez egy valószínűségi változó lesz. Számunkra ebből annyi fontos, hogy ha <span class="math inline">\(\mathbb{E}\left(Y \mid \underline{X}\right)\)</span>-t látunk, azt értsük úgy, mint valami, ami <em>minden</em> <span class="math inline">\(\mathbf{x}\)</span> esetén működik, bármikor beírható, hogy így <span class="math inline">\(\mathbb{E}\left(Y \mid \underline{X}=\mathbf{x}\right)\)</span> legyen belőle. Természetesen ez fontos, hogy ha egy egyenletben szerepel, akkor ezt az átírást mindenhol megtegyük, pl. írhatjuk, hogy <span class="math inline">\(\mathbb{E}\left(Y \mid \underline{X}=\mathbf{x}\right)=\mathbb{E}Y+\mathbf{C}_{Y\underline{X}}\mathbf{C}_{\underline{X}\underline{X}}^{-1}\left(\underline{X}-\mathbf{x}\right)\)</span> (hiszen <span class="math inline">\(\mathbf{x}\)</span> várható értéke saját maga). Ez a jelölés tehát egyfajta általánosítás.</p>
<p>Visszatérve, írhatjuk, hogy
<span class="math display">\[
    \mathbb{E}\left(Y \mid \underline{X}\right)=\beta_0 + \beta_1 X_1 + \beta_2 X_2 + \ldots + \beta_k X_k.
\]</span>
ha bevezetjük a
<span class="math display">\[
    \beta_0=\mathbb{E}Y-\mathbf{C}_{Y\underline{X}}\mathbf{C}_{\underline{X}\underline{X}}^{-1}\mathbb{E}\underline{X}
\]</span>
és a
<span class="math display">\[
    \begin{pmatrix}\beta_1&amp;\beta_2&amp; \cdots &amp; \beta_k\end{pmatrix}^T=\mathbf{C}_{Y\underline{X}}\mathbf{C}_{\underline{X}\underline{X}}^{-1}\underline{X}
\]</span>
jelöléseket.</p>

</div>
</div>













<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Az adatok igazából nem osztály-szintűek, hanem körzetenkénti átlagok, de ez minket, a mostani kérdésünk szempontjából nem érint, így a továbbiakban az egyszerűség kedvéért osztályt fogok mondani.<a href="út-az-ökonometriához.html#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>Pedig még össze sem foglaltam a fentieket úgy, hogy a korreláció nem implikál kauzalitást!<a href="út-az-ökonometriához.html#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>Egyszerűen úgy választottam a paramétereket, hogy megfeleljen a kalifornaiai példának<a href="út-az-ökonometriához.html#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>Úgy, hogy az ellipszis középpontját a várhatóérték-vektor adja meg, a tengelyek a kovariancia-mátrix sajátvektorainak irányába mutatnak, féltengelyeik hossza pedig a kovariancia-mátrix megfelelő sajátértékeivel arányos.<a href="út-az-ökonometriához.html#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>A statisztikusokról szóló viccekkel szemben.<a href="út-az-ökonometriához.html#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p>Érdemes megfigyelni (ez kétváltozós esetben jó szemmértékkel még érzékelhető vizuálisan is), hogy a regressziófüggvény <em>nem</em> az ellipszisek nagytengelye – tehát a korrelációs mátrix megfelelő sajátvektora – irányába mutat! Hanem az ellipszis <q>vízszintesen szélső</q> pontjain megy át.)<a href="út-az-ökonometriához.html#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>A bizonyítást itt elhagyom, lásd például: Bolla-Krámli: Statisztikai következtetések elmélete. Typotex, 2005. 207-208.oldal.<a href="út-az-ökonometriához.html#fnref7" class="footnote-back">↩</a></p></li>
<li id="fn8"><p>Jelölje <span class="math inline">\(\mathbf{C}_{\underline{X}\underline{X}}\)</span> az <span class="math inline">\(X\)</span>-ek szokásos kovarianciamátrixát, <span class="math inline">\(\mathbf{C}_{Y\underline{X}}\)</span> pedig azt az oszlopvektort, amely sorban az összes <span class="math inline">\(X\)</span> kovarianciáját tartalmazza <span class="math inline">\(Y\)</span>-nal.<a href="út-az-ökonometriához.html#fnref8" class="footnote-back">↩</a></p></li>
</ol>
</div>
<!-- Default Statcounter code for Physcon Research
http://research.physcon.uni-obuda.hu/ -->
<script type="text/javascript">
var sc_project=11601191; 
var sc_invisible=1; 
var sc_security="5a06c22d"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="ingyen
webstatisztika" href="https://www.statcounter.hu/"
target="_blank"><img class="statcounter"
src="https://c.statcounter.com/11601191/0/5a06c22d/1/"
alt="ingyen webstatisztika"></a></div></noscript>
<!-- End of Statcounter Code -->
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tamas-ferenci/FerenciTamas_Okonometria/edit/master/01-utazokonometriahoz.Rmd",
"text": "Szerkesztés"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["FerenciTamas_Okonometria.pdf", "FerenciTamas_Okonometria.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
